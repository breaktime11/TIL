# [2ì¥] ìŠ¤í”„ë§ ë¶€íŠ¸ ì›ë¦¬

> ### ì°¸ê³ 
>
> [velog/@adam2/ìë™í™˜ê²½ì„¤ì •](https://velog.io/@adam2/SpringBoot-ìë™-í™˜ê²½-ì„¤ì •AutoConfiguration)
>
> <br>
>
> ### ëª©ì°¨
>
> 1. ì˜ì¡´ì„± ê´€ë¦¬
> 2. ìë™ ì„¤ì •
> 3. ë‚´ì¥ ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆ

<br>

## 1. ì˜ì¡´ì„± ê´€ë¦¬ ê¸°ëŠ¥

```xml
<!-- Inherit defaults from Spring Boot -->
<parent>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-parent</artifactId>
    <version>2.0.3.RELEASE</version>
</parent>

<!-- Add typical dependencies for a web application -->
<dependencies>
    <dependency>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-web</artifactId>
    </dependency>
</dependencies>
```

> pom.xmlì—ì„œ ì˜ì¡´ì„±ì„ ì •ì˜í•  ë•Œ ë²„ì „ì„ ëª…ì‹œí•˜ì§€ ì•Šì•˜ìŒì—ë„ ë¶ˆêµ¬í•˜ê³  Spring BootëŠ” ì•Œì•„ì„œ ì ì ˆí•œ ë²„ì „ì„ ê°€ì ¸ì™€ì¤€ë‹¤. ì–´ë–»ê²Œ ê°€ëŠ¥í•œ ê±¸ê¹Œ?
>
> Spring Bootì˜ **ì˜ì¡´ì„± ê´€ë¦¬ ê¸°ëŠ¥** ë•Œë¬¸ì´ë‹¤.

<br>

Spring Boot ì´ì „ì—ëŠ” ë²„ì „ì´ ë‹¬ë¼ì„œ ì—ëŸ¬ê°€ ìƒê¸°ëŠ” ë¬¸ì œê°€ ë¹ˆë²ˆíˆ ì¼ì–´ë‚¬ë‹¤. 

ìš”ì¦˜ì—” ì‰½ê²Œ Starter ìœ„ì£¼ë¡œ ì˜ì¡´ì„±ì„ ì¶”ê°€í•˜ë©´ ë¶€ëª¨(spring-boot-starter-parent)ë¡œë¶€í„° ì˜ì¡´ì„±ì„ ìƒì†ë°›ê¸° ë•Œë¬¸ì— UTF-8 ì¸ì½”ë”©, ìë°” ë²„ì „, í”ŒëŸ¬ê·¸ì¸ ë“± ë¿ë§Œ ì•„ë‹ˆë¼ ë²„ì „ë„ ìë™ìœ¼ë¡œ ë²„ì „ì´ ë§¤í•‘ëœë‹¤. ë”°ë¼ì„œ Spring Boot Dependencyì—ì„œ ê´€ë¦¬í•˜ëŠ” ì˜ì¡´ì„±ë“¤ì€ êµ³ì´ ë²„ì „ì„ ëª…ì‹œí•˜ì§€ ì•Šì•„ë„ ëœë‹¤.

ìë™ í™˜ê²½ ì„¤ì •ì€ ìŠ¤í”„ë§ë¶€íŠ¸ì˜ í° ì¥ì ì´ë‹¤. ìŠ¤í”„ë§ë¶€íŠ¸ëŠ” jdbc, h2 ë“± ì•½ 100ì—¬ê°€ì§€ì˜ ìë™ ì„¤ì •(starter)ë¥¼ ì œê³µí•œë‹¤.

<br>

<br>

## 2. ì˜ì¡´ì„± ê´€ë¦¬ ê¸°ëŠ¥ í™œìš©

### (1) ë²„ì „ ê´€ë¦¬ í•´ì£¼ëŠ” ì˜ì¡´ì„± ì¶”ê°€

Spring Data JPAë¼ëŠ” ì˜ì¡´ì„±ì„ ì¶”ê°€

```xml
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-data-jpa</artifactId>
</dependency>
```

- spring-boot-starter ë¥¼ ì¶”ê°€í–ˆê¸° ë•Œë¬¸ì— ìë™ìœ¼ë¡œ ì˜ì¡´ì„±ì´ ì¶”ê°€ëœë‹¤

<br>

### (2) ë²„ì „ ê´€ë¦¬ ì•ˆí•´ì£¼ëŠ” ì™¸ë¶€ ì˜ì¡´ì„± ì¶”ê°€

> https://mvnrepository.com/
>
> Maven dependency ê²€ìƒ‰ ì‚¬ì´íŠ¸

```xml
<dependency>
    <groupId>org.modelmapper</groupId>
    <artifactId>modelmapper</artifactId>
    <version>2.1.0</version>
</dependency>
```

- ì™¸ë¶€ì—ì„œ ê°€ì ¸ì˜¤ëŠ” ì˜ì¡´ì„±ì€ ë²„ì „ì„ ëª…ì‹œí•´ì£¼ëŠ” ê²ƒì´ ì¢‹ë‹¤.

<br>

### (3) ê¸°ì¡´ ì˜ì¡´ì„± ë²„ì „ ë³€ê²½í•˜ê¸°

`spring-boot-dependencies-2.0.3.RELEASE.pom`ì— ë²„ì „ë“¤ì´ ì •ë¦¬ë˜ì–´ìˆë‹¤

```xml
...

<snakeyaml.version>1.19</snakeyaml.version>
<solr.version>6.6.4</solr.version>
<spring.version>5.0.7.RELEASE</spring.version>
<spring-amqp.version>2.0.4.RELEASE</spring-amqp.version>
<spring-batch.version>4.0.1.RELEASE</spring-batch.version>
<spring-cloud-connectors.version>2.0.2.RELEASE</spring-cloud-connectors.version>
<spring-data-releasetrain.version>Kay-SR8</spring-data-releasetrain.version>
<spring-hateoas.version>0.24.0.RELEASE</spring-hateoas.version>

...
```

<br>

Spring Bootì—ì„œ ê´€ë¦¬í•´ì£¼ëŠ” ì˜ì¡´ì„± ë²„ì „ì„ ë³€ê²½í•˜ê³  ì‹¶ì„ ë•ŒëŠ” `properties`ì— ë²„ì „ì„ ì¶”ê°€í•´ Overriding í•´ì£¼ë©´ ëœë‹¤.

```xml
<properties>
    <spring.version>5.0.6.RELEASE</spring.version>
</properties>
```

- 5.0.7 RELESASE ì—ì„œ 5.0.6 RELEASEë¡œ ë³€ê²½ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

<br>

<br>

## 3. ìë™ ì„¤ì • ì´í•´ (Auto Configuration)

> ### Configurationì´ë€?
>
> Springì˜ Beanì„ ë“±ë¡í•˜ëŠ” JAVA ì„¤ì • íŒŒì¼

ì—¬ëŸ¬ ì„¤ì •ì„ ì¼ìœ¼í‚¤ë©° ë‚´ì¥ëœ í†°ìº£ ì„œë²„ì—ì„œ Web Applicationì´ ì‹¤í–‰ë  ìˆ˜ ìˆëŠ” ì´ìœ  ì¤‘ì— í•˜ë‚˜ëŠ” Auto Configuration ë•Œë¬¸ì´ë‹¤.

```java
@Retention(RetentionPolicy.RUNTIME)
@Documented
@Inherited
@SpringBootConfiguration
@EnableAutoConfiguration
@ComponentScan(
    excludeFilters = {@Filter(
    type = FilterType.CUSTOM,
    classes = {TypeExcludeFilter.class}
), @Filter(
    type = FilterType.CUSTOM,
    classes = {AutoConfigurationExcludeFilter.class}
```

`@SpringBootApplication` ì–´ë…¸í…Œì´ì…˜ ì•ˆì— ìœ„ì™€ ê°™ì´ ì„¤ì •ë˜ì–´ ìˆê¸° ë•Œë¬¸ì´ë‹¤.

<br>

```java
// @SpringBootApplication
@SpringBootConfiguration
@ComponentScan
@EnableAutoConfiguration
public class Application {
    public static void main(String[] args) {
        SpringApplication.run(Application.class, args);
    }
}
```

ìŠ¤í”„ë§ë¶€íŠ¸ì—ì„œëŠ” `@EnableAutoConfiguration` ë˜ëŠ” `@SpringBootApplication` ì¤‘ í•˜ë‚˜ë§Œ ì‚¬ìš©í•˜ë©´ ìë™ í™˜ê²½ì„¤ì •ì´ ê°€ëŠ¥í•˜ë‹¤.

**@SpringBootApplication** ì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì€ ë‹¤ìŒì˜ ì„¸ ì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒê³¼ ê°™ë‹¤.

- `@SpringBootConfiguration` : ìŠ¤í”„ë§ë¶€íŠ¸ ì„¤ì •ì„ ë‚˜íƒ€ë‚´ëŠ” ì–´ë…¸í…Œì´ì…˜ì´ë‹¤. ìŠ¤í”„ë§ì˜ @Configurationì„ ëŒ€ì²´í•œë‹¤.
- `@ComponentScan` : basePackages í”„ë¡œí¼í‹° ê°’ì— ë³„ë„ì˜ ê²½ë¡œë¥¼ ì„¤ì •í•˜ì§€ ì•Šìœ¼ë©´ í•´ë‹¹ ì–´ë…¸í…Œì´ì…˜ì´ ìœ„ì¹˜í•œ íŒ¨í‚¤ì§€ê°€ ë£¨íŠ¸ ê²½ë¡œê°€ ëœë‹¤. í•˜ìœ„ ë£¨íŠ¸ê¹Œì§€ ì­‰ ê°€ë©´ì„œ **Beanì„ ë“±ë¡**í•œë‹¤.
  - `@Component` ê°€ ë¶™ì–´ìˆëŠ” í´ë˜ìŠ¤ë¥¼ ì°¾ì•„ê°€ì„œ ëª¨ë“  ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•´ ë¹ˆìœ¼ë¡œ ë“±ë¡í•œë‹¤.
- `@EnableAutoConfiguration` : **ë¯¸ë¦¬ ì •ì˜ëœ Bean**ì„ ê°€ì ¸ì™€ì„œ **ë“±ë¡**í•´ì¤€ë‹¤.
  - ë¯¸ë¦¬ ì •ì˜ëœ Beanì€ ì–´ë””ì— ìˆì„ê¹Œ?
    - ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì¤‘ sring-boot-autoconfigureì— **META-INF** ë””ë ‰í† ë¦¬ í•˜ìœ„ì˜ **spring.factories**ì— ìë™ìœ¼ë¡œ ê°€ì ¸ì˜¬ Beanë“¤ì´ ë“±ë¡ë˜ì–´ìˆë‹¤.

<br>

### (1) Spring Boot Applicationì˜ Bean ë“±ë¡í•˜ëŠ” ë‘ ë‹¨ê³„

1. `ComponentScan` ìˆ˜í–‰í•˜ë©´ì„œ Bean ë“±ë¡
2. `EnableAutoConfiguration`ìœ¼ë¡œ ì¶”ê°€ì ìœ¼ë¡œ ì½ì–´ì˜¨ Beanë“¤ì„ ë“±ë¡

<br>

### (2) @EnableAutoConfiguration

![image](https://user-images.githubusercontent.com/65323733/88510600-501e9800-d01e-11ea-9031-50b4f81dfe3b.png)

<br>

### spring.factories

```
# Auto Configure
org.springframework.boot.autoconfigure.EnableAutoConfiguration=\
org.springframework.boot.autoconfigure.admin.SpringApplicationAdminJmxAutoConfiguration,\
org.springframework.boot.autoconfigure.aop.AopAutoConfiguration,\
org.springframework.boot.autoconfigure.amqp.RabbitAutoConfiguration,\
org.springframework.boot.autoconfigure.batch.BatchAutoConfiguration,\
org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration,\
org.springframework.boot.autoconfigure.cassandra.CassandraAutoConfiguration,\
org.springframework.boot.autoconfigure.cloud.CloudAutoConfiguration,\
org.springframework.boot.autoconfigure.context.ConfigurationPropertiesAutoConfiguration,\
org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration,\
org.springframework.boot.autoconfigure.context.PropertyPlaceholderAutoConfiguration,\
org.springframework.boot.autoconfigure.couchbase.CouchbaseAutoConfiguration,\
org.springframework.boot.autoconfigure.dao.PersistenceExceptionTranslationAutoConfiguration,\
org.springframework.boot.autoconfigure.data.cassandra.CassandraDataAutoConfiguration,\
org.springframework.boot.autoconfigure.data.cassandra.CassandraReactiveDataAutoConfiguration,\
org.springframework.boot.autoconfigure.data.cassandra.CassandraReactiveRepositoriesAutoConfiguration,\
org.springframework.boot.autoconfigure.data.cassandra.CassandraRepositoriesAutoConfiguration,\

ë“±..
```

- `org.springframework.boot.autoconfigure.EnableAutoConfiguration` í‚¤ ê°’ ë°‘ì— ì„¤ì •ë˜ì–´ ìˆëŠ” í´ë˜ìŠ¤ë“¤ì€ ì „ë¶€ auto configuration ì ìš© ëŒ€ìƒì´ ëœë‹¤
  - ì‚¬ì‹¤ ì „ë¶€ëŠ” ì•„ë‹ˆê³  ì¡°ê±´ì— ë”°ë¼ ë‹¬ë¼ì§„ë‹¤.^)^ 
    - `ConditionlOn` ìœ¼ë¡œ ì‹œì‘

<br>

### (3) ComponentScan

ë©”ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ í´ë˜ìŠ¤ë¶€í„° í•˜ìœ„ì˜ Componentë¼ëŠ” ì• ë…¸í…Œì´ì…˜ì„ ê°€ì§„ í´ë˜ìŠ¤ë“¤ì„ ìŠ¤ìº”í•´ì„œ Beanìœ¼ë¡œ ë“±ë¡í•œë‹¤.

- `@Component`
- `@Configuration` `@Repository` `@Service` `@Controller ` `@RestController` 

<br>

<br>

## 4. ìë™ ì„¤ì • ë§Œë“¤ê¸° 1 : Starterì™€ Autoconfigure

> - xxx-spring-boot-autoconfigure ëª¨ë“ˆ : ìë™ì„¤ì •
> - xxx-spring-boot-starter ëª¨ë“ˆ : í•„ìš” ì˜ì¡´ì„± ì •ì˜
> - xxx-spring-boot-starter : í•˜ë‚˜ë¡œ ë§Œë“¤ê¸°

<br>

### (1) ìƒˆë¡œìš´ í”„ë¡œì íŠ¸ ìƒì„± í›„ ì˜ì¡´ì„± ì¶”ê°€

```xml
<dependencies>
    <dependency>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-autoconfigure</artifactId>
    </dependency>
    <dependency>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-autoconfigure-processor</artifactId>
        <optional>true</optional>
    </dependency>
    </dependencies>

<dependencyManagement>
    <dependencies>
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-dependencies</artifactId>
            <version>2.0.3.RELEASE</version>
            <type>pom</type>
            <scope>import</scope>
        </dependency>
    </dependencies>
</dependencyManagement>
```

- autoconfigure ì˜ì¡´ì„±
- autoconfigure-processor ì˜ì¡´ì„±
- ì˜ì¡´ì„± ê´€ë¦¬í•´ì£¼ëŠ” dependencyManagement ì¶”ê°€
  - spring-boot-dependencies

<br>

### (2) @Configuration íŒŒì¼ ì‘ì„±

![image](https://user-images.githubusercontent.com/65323733/88519973-e9a17600-d02d-11ea-9d77-91129d32be26.png)

#### Holoman.java

```java
package me.dsunni;

public class Holoman {
    String name;
    int howLong;

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public int getHowLong() {
        return howLong;
    }

    public void setHowLong(int howLong) {
        this.howLong = howLong;
    }

    @Override
    public String toString() {
        return "Holoman{" +
                "name='" + name + '\'' +
                ", howLong=" + howLong +
                '}';
    }
}
```

<br>

#### HolomanConfiguration.java

```java
package me.dsunni;

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

@Configuration
public class HolomanConfiguration {
    @Bean
    public Holoman holoman() {
        Holoman holoman = new Holoman();
        holoman.setHowLong(5);
        holoman.setName("dsunni");

        return holoman;
    }
}
```

- holomanì´ë¼ëŠ” beanì„ ë¦¬í„´í•˜ëŠ” ì„¤ì •íŒŒì¼

<br>

### (3) META-INFì— spring.factories íŒŒì¼ ë§Œë“¤ê¸°

```
org.springframework.boot.autoconfigure.EnableAutoConfiguration=\
  me.dsunni.HolomanConfiguration
```

- ì„¤ì •íŒŒì¼ì„ ëª…ì‹œì ìœ¼ë¡œ ì •ì˜í•´ì£¼ë©´ ì´ keyì— í•´ë‹¹í•˜ëŠ” Bean ì„¤ì •ì„ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œëœë‹¤

<br>

### (4) mvn install

![image](https://user-images.githubusercontent.com/65323733/88522894-06d84380-d032-11ea-8f99-783082dc433c.png)

- `Maven` - `Lifecycle` - `install`
  - ë¹Œë“œí•´ì„œ jaríŒŒì¼ì„ ìƒì„±í•´ ë¡œì»¬ ì €ì¥ì†Œì— ì„¤ì¹˜

<br>

### (5) ì›ë˜ í”„ë¡œì íŠ¸ì—ì„œ ì˜ì¡´ì„± ì¶”ê°€

```xml
<dependencies>
    <dependency>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-web</artifactId>
    </dependency>
    <dependency>
        <groupId>me.dsunni</groupId>
        <artifactId>dsunni-spring-boot-starter</artifactId>
        <version>1.0-SNAPSHOT</version>
    </dependency>
</dependencies>
```

<br>

![image](https://user-images.githubusercontent.com/65323733/88523251-9aaa0f80-d032-11ea-99ce-96a50d11ce99.png)

ìœ„ì™€ ê°™ì´ ì •ìƒì ìœ¼ë¡œ ë“¤ì–´ì™€ ìˆëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

<br>

#### Application.java

```java
@SpringBootApplication
public class Application {
    public static void main(String[] args) {
        // SpringApplication.run(Application.class, args);
        SpringApplication application = new SpringApplication(Application.class);
        application.setWebApplicationType(WebApplicationType.NONE);
        application.run(args);
    }
}
```

- ì¡°ê¸ˆ ë” ë¹¨ë¦¬ ëœ¨ê¸° ìœ„í•´ WebApplicationTypeì„ NONEìœ¼ë¡œ ì„¤ì •

ë©”ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ ìˆ˜ì • í›„ ì¶”ê°€í•œ `Holoman` Beanì´ ìˆëŠ”ì§€ í™•ì¸í•´ë³´ì

<br>

### (6) Holoman Bean í™•ì¸

### HolomanRunner.java

```java
package me.dsunni;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.ApplicationArguments;
import org.springframework.boot.ApplicationRunner;
import org.springframework.stereotype.Component;

@Component
public class HolomanRunner implements ApplicationRunner {
    @Autowired
    Holoman holoman;

    @Override
    public void run(ApplicationArguments args) throws Exception {
        System.out.println(holoman);
    }
}
```

- `ApplicationRunner` ì¸í„°í˜ì´ìŠ¤
  - Spring Boot Applicationì„ ë„ì› ì„ ë•Œ ìë™ìœ¼ë¡œ ì‹¤í–‰ë˜ëŠ” Beanì„ ë§Œë“¤ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©

### ğŸ“Œ Unregistering JMX-exposed beans on shutdown: ERROR

- HolmanRunnerì— `@Component` ì¶”ê°€

<br>

<br>

## 5. ìë™ì„¤ì •ë§Œë“¤ê¸° 2 - @ConfigurationProperties

> application.properties íŒŒì¼ì„ í†µí•´ Beanì„ ì •ì˜í•´ì„œ ë™ì ìœ¼ë¡œ ìƒì„±í•˜ë„ë¡ í•´ë³´ì
>
> ### application.properties
>
> ìŠ¤í”„ë§ë¶€íŠ¸ëŠ” application.properties íŒŒì¼ì„ í†µí•´ ì„¤ì •ì„ì œê³µí•œë‹¤. ì´ íŒŒì¼ì—ëŠ” ë¶€íŠ¸ê°€ ì œê³µí•˜ëŠ” í”„ë¡œí¼í‹° ë¿ ì•„ë‹ˆë¼ ì»¤ìŠ¤í…€ í”„ë¡œí¼í‹°ë¥¼ ì¶”ê°€í•  ìˆ˜ ìˆë‹¤.
>
> ê·¸ ì¤‘ ì„¤ì • í”„ë¡œí¼í‹° í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ë©´ ê´€ë ¨ ì„¤ì •ì„ í•œ í´ë˜ìŠ¤ì—ì„œ ê´€ë¦¬í•  ìˆ˜ ìˆë‹¤.
>
> ![image](https://user-images.githubusercontent.com/65323733/88610331-53b72b00-d0c1-11ea-96af-eb9e0b709912.png)
>
> ë™ì¼í•œ **key ê°’**ì¸ holomanë“¤ì„ ë¬¶ì–´ì„œ Beanìœ¼ë¡œ ë“±ë¡í•  ìˆ˜ ìˆë‹¤
>
> <br>
>
> HolomanRunnerëŠ” application.propertiesì—ì„œ ì„¤ì •í•œ ê°’ì„ ì½ì–´ì™€ Holoman ë¹ˆì„ ì¬ì •ì˜í•˜ê²Œ ëœë‹¤.

<br>

![image](https://user-images.githubusercontent.com/65323733/88529719-5a9b5a80-d03b-11ea-88c0-9fe73dd97e69.png)

<br>

#### HolomanProperties

```java
package me.dsunni;

import org.springframework.boot.context.properties.ConfigurationProperties;

@ConfigurationProperties("holoman")
public class HolomanProperties {
    private String name;
    private int howLong;

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public int getHowLong() {
        return howLong;
    }

    public void setHowLong(int howLong) {
        this.howLong = howLong;
    }
}
```

ìœ„ HolomanProperties í´ë˜ìŠ¤ëŠ”  property íŒŒì¼ì„ í†µí•´ ê°’ì„ ê°€ì ¸ì˜¤ëŠ” ì—­í• ì„ ìˆ˜í–‰í•œë‹¤.

<br>

### @ConfigurationProperties

ìë™ ì„¤ì • í´ë˜ìŠ¤ ë‚´ì˜ ìŠ¤í”„ë§ ë¹ˆì„ **property íŒŒì¼**ì„ í†µí•´ ì¬ì •ì˜ í•˜ê³ ì í•  ë•ŒëŠ” ì´ ì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•œë‹¤.

ì´ ì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” ë¨¼ì € ë‹¤ìŒê³¼ ê°™ì€ dependencyë¥¼ ì¶”ê°€í•´ì•¼í•œë‹¤.

```xml
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-configuration-processor</artifactId>
    <optional>true</optional>
</dependency>
```

<br>

#### @ConfigurationProperties("holoman")

ìœ„ `application.properties` íŒŒì¼ì—ì„œ ë“±ë¡í–ˆë˜ Beanì˜ ì´ë¦„(holoman)ì„ ê´„í˜¸ ì•ˆì— ë„£ì–´ì¤€ë‹¤.

ê·¸ í›„ properties íŒŒì¼ì— ìˆë˜ name, how-longì„ ë°›ì„ ìˆ˜ ìˆëŠ” ë³€ìˆ˜ë¥¼ ì •ì˜í•˜ê³ , getterì™€ setterë¥¼ ë§Œë“¤ì–´ì¤€ë‹¤. ì´ë ‡ê²Œ í•˜ë©´ ë³€ìˆ˜ì— ê°’ì„ ë°›ì„ ìˆ˜ ìˆê²Œëœë‹¤.

<br>

#### HolomanConfiguration.java

```java
package me.dsunni;

import org.springframework.boot.autoconfigure.condition.ConditionalOnMissingBean;
import org.springframework.boot.context.properties.EnableConfigurationProperties;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

@Configuration
@EnableConfigurationProperties(HolomanProperties.class)
public class HolomanConfiguration {
    @Bean
    @ConditionalOnMissingBean
    public Holoman holoman(HolomanProperties properties) {
        Holoman holoman = new Holoman();
        holoman.setHowLong(properties.getHowLong());
        holoman.setName(properties.getName());

        return holoman;
    }
}
```

### **@EnableConfigurationPropertes**

ì´ ì–´ë…¸í…Œì´ì…˜ì„ í†µí•´ HolomanConfiguration í´ë˜ìŠ¤ë¥¼ í”„ë¡œí¼í‹° íŒŒì¼(HolomanProperties) ì •ë³´ë¥¼ ë‹´ê³  ìˆëŠ” í´ë˜ìŠ¤ë¡œ ìë™ ë“±ë¡í•˜ê²Œ í•´ì¤€ë‹¤.

<br>

### **@ConditionalOnMissingBean**

ì´ ì–´ë…¸í…Œì´ì…˜ì€ ìŠ¤í”„ë§ ë¶€íŠ¸ í”„ë¡œì íŠ¸ ìƒì—ì„œ ê°™ì€ ì´ë¦„ì˜ ìŠ¤í”„ë§ ë¹ˆì´ ìˆì„ ë•Œì—ëŠ” ê·¸ ìŠ¤í”„ë§ ë¹ˆì„ ìƒìš”í•˜ê³ , ë§Œì•½ ì—†ë‹¤ë©´ ìë™ ë“±ë¡í•œ ë¹ˆì„ ì“°ê²Œë” ìœ ë„í•´ì¤€ë‹¤.



